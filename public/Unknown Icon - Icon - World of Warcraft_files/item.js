Listview.templates.item={sort:[-2],mode:Listview.MODE_CHECKBOX,searchable:1,filtrable:1,completionText:LANG.lvcompletion_collection,sortNameUseQuality:true,beforeSort:function(){var c,b;for(var a=0;!c&&a<this.columns.length;a++){if(this.columns[a].id=="name"){c=this.columns[a];b=a+1}}var d=b-1;if(Listview.sort.length&&(Listview.sort[0]==b)){this.template.sortNameUseQuality=!this.template.sortNameUseQuality;c.name=this.template.sortNameUseQuality?(WH.TERMS.name+" + "+WH.TERMS.quality):WH.TERMS.name;if(!this.thead){return}if(this.mode==Listview.MODE_CHECKBOX&&d<this.thead.firstChild.childNodes.length-1){d+=1}var e=this.thead.firstChild.childNodes[d].firstChild.firstChild.firstChild.firstChild;WH.st(e,c.name)}},columns:[{id:"name",name:WH.TERMS.name,type:"text",align:"left",span:2,value:"name",compute:function(u,j,b){if(u.upgraded){b.className="upgraded"}u=WH.applyStatModifications(u,null,null,null,Listview.funcBox.getCurrentItemBonuses.call(this,u));var q=WH.ce("td");q.style.width="1px";q.style.padding="4px 0 4px 10px";q.style.borderRight="none";var h=null,k=null;if(u.stack!=null){var o=parseInt(u.stack[0]);var p=parseInt(u.stack[1]);h=(o||p)?o+((p&&p!=o)?"-"+p:""):""}if(u.avail!=null){k=u.avail}if(u.id){WH.ae(q,g_items.createIcon(u.id,(this.iconSize==null?1:this.iconSize),h,k,u.bonuses))}WH.ae(b,q);j.style.borderLeft="none";var y,m;if(typeof u.name==="string"){y=u.name}else{if(u.id){y=WH.TERMS.openparenthesis_punct+WH.Types.getUpperSingular(WH.Types.ITEM)+" #"+u.id+WH.TERMS.closedparenthesis_punct}else{y=WH.TERMS.openparenthesis_punct+WH.TERMS.unknownEntity_format.replace("%s",WH.Types.getUpperSingular(WH.Types.ITEM))+WH.TERMS.closedparenthesis_punct}}m=1;if(u.hasOwnProperty("quality")){m=u.quality}var x=WH.ce("a");x.className="q"+m+" listview-cleartext";x.href=this.getItemLink(u);if(u.frommerge){x.className+=" icon-merge-right"}if(u.rel){Icon.getLink(q.firstChild).rel=u.rel;x.rel=u.rel}var e="";if(u.nameSuffix){e=" "+u.nameSuffix}WH.ae(x,WH.ct(y+e));var f=WH.ce("div");WH.ae(f,x);if(u.reqclass){var v=WH.ce("div");v.className="small2";var w=Listview.funcBox.assocBinFlags(u.reqclass,g_chr_classes);for(var q=0,r=w.length;q<r;++q){if(q>0){WH.ae(v,WH.ct(", "))}var x=WH.ce("a");x.href=WH.Entity.getPath(WH.Types.CLASS,w[q],g_chr_classes[w[q]]);x.className="c"+w[q];WH.st(x,g_chr_classes[w[q]]);WH.ae(v,x)}WH.ae(f,v)}var c=typeof Filter!="undefined"?Filter.listview_getExtraItemColumnCount():null;if(typeof c=="number"&&c>=5){if(u.source!=null&&u.source.length==1){if(u.reqclass){WH.ae(v,WH.ct(LANG.dash))}else{var v=WH.ce("div");v.className="small2"}var t=(u.sourcemore?u.sourcemore[0]:{});if(t.t){var x=WH.ce("a");if(t.q!=null){x.className="q"+t.q}else{x.className="q1"}x.href=WH.Entity.getPath(t.t,t.ti,t.n);if(t.n.length<=30){WH.ae(x,WH.ct(t.n))}else{x.title=t.n;WH.ae(x,WH.ct(WH.trim(t.n.substr(0,27))+"..."))}WH.ae(v,x)}else{WH.ae(v,WH.ct(WH.Wow.Item.getSourceCategory(u.source[0],t)))}var g=WH.Wow.Item.getSourceDescription(u.source[0],t);if(g!=null){WH.ae(v,WH.ct(WH.TERMS.hyphen_punct));if(g.pretext){WH.ae(v,WH.ct(g.pretext))}if(g.url){var x=WH.ce("a");x.className="q1";x.href=g.url;WH.ae(x,WH.ct(g.text));WH.ae(v,x)}else{WH.ae(v,WH.ct(g.text))}if(g.posttext){WH.ae(v,WH.ct(g.posttext))}}WH.ae(f,v)}}if(u.namedesc||u.heroic||u.reqrace||u.raidfinder||u.thunderforged||u.warforged||u.flexible){f.style.position="relative";var v=WH.ce("div");v.className="listview-name-info";var n=WH.ce("span");n.className="q2";if(u.namedesc){WH.ae(n,WH.ct(u.namedesc))}else{if(u.raidfinder){WH.ae(n,WH.ct(WH.TERMS.raidfinder))}else{if(u.flexible){WH.ae(n,WH.ct(WH.TERMS.flexible))}else{if(u.thunderforged){if(u.heroic){WH.ae(n,WH.ct(WH.TERMS.heroic+" "+WH.TERMS.thunderforged))}else{WH.ae(n,WH.ct(WH.TERMS.thunderforged))}}else{if(u.warforged){if(u.heroic){WH.ae(n,WH.ct(WH.TERMS.heroic+" "+WH.TERMS.warforged))}else{WH.ae(n,WH.ct(WH.TERMS.warforged))}}else{if(u.heroic){WH.ae(n,WH.ct(WH.TERMS.heroic))}}}}}}if(!$(n).is(":empty")){WH.ae(v,n)}if(u.reqrace){if((u.reqrace&1791)!=1101&&(u.reqrace&1791)!=690){if(u.namedesc||u.heroic||u.raidfinder||u.thunderforged||u.warforged||u.flexible){WH.ae(v,WH.ce("br"));v.style.bottom="-6px"}var l=Listview.funcBox.assocBinFlags(u.reqrace,g_chr_races);for(var q=0,r=l.length;q<r;++q){if(q>0){WH.ae(v,WH.ct(", "))}var x=WH.ce("a");x.href=WH.Entity.getPath(WH.Types.RACES,l[q],g_chr_races[l[q]]);WH.st(x,g_chr_races[l[q]]);WH.ae(v,x)}v.className+=" q1"}}WH.aef(f,v)}if(u.parentListviewRowItem){b.classList.add("mergerow")}else{if(WH.Page.Items&&WH.Page.Items.hasChildVersions(this,u.id)){let lv=this;let span=WH.ce("a",{className:"toggler-off",href:"javascript:"},WH.ce("span",{className:"fa fa-chevron-right fa-fw"}));WH.aE(span,"click",function(a){a.stopPropagation();span.classList.toggle("toggler-off");span.classList.toggle("toggler-on");WH.Page.Items.hideChildVersions(lv,u.id,span.classList.contains("toggler-off"))});WH.aef(f,span)}}WH.ae(j,f)},getVisibleText:function(d){var b,g;b=d.name;g=1;if(d.hasOwnProperty("quality")){g=d.quality}var f=b;d=WH.applyStatModifications(d,null,null,null,Listview.funcBox.getCurrentItemBonuses.call(this,d));if(d.nameSuffix){f+=" "+d.nameSuffix}if(d.namedesc){f+=" "+d.namedesc}else{if(d.heroic){f+=" "+WH.TERMS.heroic}if(d.warforged){f+=" "+WH.TERMS.warforged}if(d.thunderforged){f+=" "+WH.TERMS.thunderforged}if(d.raidfinder){f+=" "+WH.TERMS.raidfinder}if(d.flexible){f+=" "+WH.TERMS.flexible}}if(d.reqrace){f+=" "+Listview.funcBox.arrayText(Listview.funcBox.assocBinFlags(d.reqrace,g_chr_races),g_chr_races)}if(d.reqclass){f+=" "+Listview.funcBox.arrayText(Listview.funcBox.assocBinFlags(d.reqclass,g_chr_classes),g_chr_classes)}var c=typeof Filter!="undefined"?Filter.listview_getExtraItemColumnCount():null;if(typeof c=="number"&&c>=5){if(d.source!=null&&d.source.length==1){var e=(d.sourcemore?d.sourcemore[0]:{});if(e.t){f+=" "+e.n}else{f+=" "+WH.Wow.Item.getSourceCategory(d.source[0],e)}var a=WH.Wow.Item.getSourceDescription(d.source[0],e);if(a!=null){if(a.pretext){f+=" "+a.pretext}f+=" "+a.text;if(a.posttext){f+=" "+a.posttext}}}}return f},sortFunc:function(d,c){let cmp=0;if(this.template.sortNameUseQuality){cmp=cmp||WH.stringCompare(d.quality||1,c.quality||1)}return cmp||WH.stringCompare(d.name,c.name)}},{id:"level",name:WH.TERMS.itemlevelshort,tooltip:WH.GlobalStrings.STAT_AVERAGE_ITEM_LEVEL,type:"range",getMinValue:function(a){if(this.ilvlOverride){return typeof this.ilvlOverride.value=="function"?this.ilvlOverride.value.call(this,a):this.ilvlOverride.value}return a.minlevel?a.minlevel:Listview.funcBox.getItemLevelWithBonuses.call(this,a)},getMaxValue:function(a){if(this.ilvlOverride){return typeof this.ilvlOverride.value=="function"?this.ilvlOverride.value.call(this,a):this.ilvlOverride.value}return a.maxlevel?a.maxlevel:Listview.funcBox.getItemLevelWithBonuses.call(this,a)},compute:function(a,b){if(this.ilvlOverride){return typeof this.ilvlOverride.value=="function"?this.ilvlOverride.value.call(this,a):this.ilvlOverride.value}if(a.minlevel&&a.maxlevel){if(a.minlevel!=a.maxlevel){return a.minlevel+WH.TERMS.hyphen_punct+a.maxlevel}else{return a.minlevel}}else{return Listview.funcBox.getItemLevelWithBonuses.call(this,a)}},sortFunc:function(d,c,e){if(e>0){return WH.stringCompare(d.minlevel,c.minlevel)||WH.stringCompare(d.maxlevel,c.maxlevel)||WH.stringCompare(Listview.funcBox.getItemLevelWithBonuses.call(this,d),Listview.funcBox.getItemLevelWithBonuses.call(this,c))}else{return WH.stringCompare(d.maxlevel,c.maxlevel)||WH.stringCompare(d.minlevel,c.minlevel)||WH.stringCompare(Listview.funcBox.getItemLevelWithBonuses.call(this,d),Listview.funcBox.getItemLevelWithBonuses.call(this,c))}}},{id:"reqlevel",name:WH.TERMS.requires_abbrev,tooltip:WH.TERMS.requiredlevel_stc,value:"reqlevel",compute:function(a,b){a=WH.applyStatModifications(a,null,null,null,Listview.funcBox.getCurrentItemBonuses.call(this,a));if(a.reqlevel>1){return a.reqlevel}}},{id:"bonuses",name:WH.TERMS.versions,compute:function(r,e){var c=[];var p=(r.bonustrees!=null&&r.bonustrees.length>0);var o=false;var g=0;if(p&&WH.isSet("g_item_bonuscontexts")){var b=[];for(var h in r.bonustrees){var s=r.bonustrees[h];for(var j in g_item_bonuscontexts){var n=g_item_bonuscontexts[j];for(var f in n){var m=n[f];if(m[0]==s&&m[1]!=0){b.push([m[1]]);switch(j){case"1":case"3":o=true;break;case"2":g=2;break;case"5":case"6":case"4":g=3;break;default:break}}}}}if(!o&&g){b.push(0)}b.sort();var d={},q=0;for(var h=0;h<b.length;++h){if(d.hasOwnProperty(b[h][0])){continue}d[b[h][0]]=true;var a=$.extend({},r);a.bonuses=b[h];var l=this.getItemLink(a);c.push({0:g_items.getIcon(r.id,b[h]),1:1,2:l});if(++q>=4){break}}}else{if(r.heirloombonuses){for(var h=0;h<r.heirloombonuses.length;++h){var a=$.extend({},r);a.bonuses=[r.heirloombonuses[h]];var l=this.getItemLink(a);c.push({0:g_items.getIcon(r.id,[r.heirloombonuses[h]]),1:1,2:l})}}else{if(WH.isSet("g_artifact_bonuses")&&g_artifact_bonuses.hasOwnProperty(r.id)){for(var h=0;h<g_artifact_bonuses[r.id].length;++h){var a=$.extend({},r);a.bonuses=[g_artifact_bonuses[r.id][h]];var l=this.getItemLink(a);c.push({0:g_items.getIcon(r.id,[g_artifact_bonuses[r.id][h]]),1:1,2:l})}}}}Listview.funcBox.createCenteredIcons(c,e,null,null,null,8)},sortFunc:function(d,c,e){var g=d.bonustrees?d.bonustrees.length:0;var f=c.bonustrees?c.bonustrees.length:0;return WH.stringCompare(g,f)}},{id:"side",name:WH.TERMS.side,type:"text",compute:function(a,c){if(a.side&&a.side!=3){var b=WH.ce("span");b.className=(a.side==1?"icon-alliance":"icon-horde");b.onmouseover=function(d){WH.Tooltip.showAtCursor(d,g_sides[a.side],0,0,"q")};b.onmousemove=WH.Tooltip.cursorUpdate;b.onmouseout=WH.Tooltip.hide;WH.ae(c,b)}},getVisibleText:function(a){if(a.side){return g_sides[a.side]}},sortFunc:function(d,c,e){return WH.stringCompare(g_sides[d.side],g_sides[c.side])}},{id:"dps",name:WH.TERMS.dps,value:"dps",compute:function(a,b){return(a.dps||0).toFixed(2)},hidden:true},{id:"speed",name:WH.TERMS.speed,value:"speed",compute:function(a,b){return(a.speed||0).toFixed(2)},hidden:true},{id:"armor",name:WH.TERMS.armor,value:"armor",compute:function(a,c){var b=this.ilvlOverride?(typeof this.ilvlOverride.value=="function"?this.ilvlOverride.value.call(this,a):this.ilvlOverride.value):null;a=WH.applyStatModifications(a,null,null,b,Listview.funcBox.getCurrentItemBonuses.call(this,a));if(a.armor>0){return a.armor}},hidden:true},{id:"slot",name:WH.TERMS.slot,type:"text",compute:function(a,b){WH.noWrap(b);return g_item_slots[a.slot]},getVisibleText:function(a){return g_item_slots[a.slot]},sortFunc:function(d,c,e){return WH.stringCompare(g_item_slots[d.slot],g_item_slots[c.slot])}},{id:"slots",name:WH.TERMS.slots,value:"nslots",hidden:true},{id:"skill",name:WH.TERMS.skill,value:"skill",hidden:true},{id:"glyph",name:WH.TERMS.glyphtype_stc,type:"text",value:"glyph",compute:function(a,b){if(a.glyph){return g_item_glyphs[a.glyph]}},getVisibleText:function(a){return g_item_glyphs[a.glyph]},sortFunc:function(d,c,e){return WH.stringCompare(g_item_glyphs[d.glyph],g_item_glyphs[c.glyph])},hidden:true},{id:"source",name:WH.TERMS.source,type:"text",compute:function(k,d){if(this.iconSize==0){d.className="small"}if(k.attainable){return WH.TERMS.unavailable}else{if(k.source!=null){if(k.source.length==1){WH.noWrap(d);var c=(k.sourcemore?k.sourcemore[0]:{});if(c.t){var h=WH.ce("a");if(c.q!=null){h.className="q"+c.q}else{h.className="q1"}h.href=WH.Entity.getPath(c.t,c.ti,c.n);h.style.whiteSpace="nowrap";if(c.icon){h.className+=" icontiny tinyspecial";h.style.backgroundImage='url("'+WH.staticUrl+"/images/wow/icons/tiny/"+c.icon.toLowerCase()+'.gif")'}WH.ae(h,WH.ct(c.n));WH.ae(d,h)}else{WH.ae(d,WH.ct(WH.Wow.Item.getSourceCategory(k.source[0],c)))}var f=WH.Wow.Item.getSourceDescription(k.source[0],c);if(this.iconSize!=0&&f!=null){var b=WH.ce("div");b.className="small2";if(f.pretext){WH.ae(b,WH.ct(f.pretext))}if(f.url){var h=WH.ce("a");h.className="q1";h.href=f.url;WH.ae(h,WH.ct(f.text));WH.ae(b,h)}else{WH.ae(b,WH.ct(f.text))}if(f.posttext){WH.ae(b,WH.ct(f.posttext))}WH.ae(d,b)}}else{var j="";for(var e=0,g=k.source.length;e<g;++e){if(e>0){j+=WH.TERMS.comma_punct}j+=g_sources[k.source[e]]}return j}}}},getVisibleText:function(b){if(b.attainable){return WH.TERMS.unavailable}else{if(b.source!=null){if(b.source.length==1){var d="";var c=(b.sourcemore?b.sourcemore[0]:{});if(c.t){d+=" "+c.n}else{d+=" "+WH.Wow.Item.getSourceCategory(b.source[0],c)}var a=WH.Wow.Item.getSourceDescription(b.source[0],c);if(a!=null){if(a.pretext){d+=" "+a.pretext}d+=" "+a.text;if(a.posttext){d+=" "+a.posttext}}return d}else{return Listview.funcBox.arrayText(b.source,g_sources)}}}},sortFunc:function(f,d){var g=Listview.funcBox.assocArrCmp(f.source,d.source,g_sources);if(g!=0){return g}var e=(f.sourcemore&&f.source.length==1?f.sourcemore[0].n:null),c=(d.sourcemore&&d.source.length==1?d.sourcemore[0].n:null);return WH.stringCompare(e,c)}},{id:"type",name:WH.TERMS.type,type:"text",compute:function(r,e){e.className="small q1";WH.noWrap(e);var p=WH.ce("a");var m=WH.Wow.Item.getTypeNameAndUrl(r.classs,r.subclass,r.subsubclass);p.href=m.url;WH.ae(p,WH.ct(m.text));if(this.classFilter!==null){var o=parseInt($("#class-selector div.active a").attr("data-classid"));var q=null;var g=[];var n=[];var d=Menu.findItem(mn_spells,[-12]);for(var l in r.specs){if(WH.inArray(g_chr_specs_by_class[o],r.specs[l])!=-1){if(!q&&d){for(var h in d[3]){if(d[3][h][0]==o){q=d[3][h];break}}}var c="";var b="";for(var f in q){if(q[3][f][0]==r.specs[l]){c=q[3][f][4].tinyIcon.toLowerCase();b=q[3][f][1];break}}n.push({0:c,1:null,2:"/spells=-12."+o+"."+r.specs[l]});g.push(b)}}Listview.funcBox.createCenteredIcons(n,e);$(e).find("div.iconsmall").each(function(a){$(this).bind("mouseover",function(i){WH.Tooltip.showAtCursor(i,g[a],0,0,"q")});$(this).bind("mouseout",function(i){WH.Tooltip.hide()})})}WH.ae(e,p)},getVisibleText:function(a){return WH.Wow.Item.getTypeNameAndUrl(a.classs,a.subclass,a.subsubclass).text},sortFunc:function(d,c,f){var e=WH.Wow.Item.getTypeNameAndUrl;return WH.stringCompare(e(d.classs,d.subclass,d.subsubclass).text,e(c.classs,c.subclass,c.subsubclass).text)}},{id:"qty",name:WH.TERMS.amount,tooltip:WH.TERMS.amount,value:"qty",compute:function(a,b){return(a.qty||1)},hidden:true},{id:"noteworthy",hidden:true,sortFunc:function(e,d){var f=[e,d];var c=[0,0];for(var h,g=0;h=f[g];g++){c[g]=(function(a){if(a.classs===WH.Wow.Item.CLASS_QUEST){return 1}if(a.specificDrop){return 1}var b=a.quality;if(b===WH.Wow.Item.QUALITY_POOR){return-1}return 0})(h)}return c[1]-c[0]}},{id:Listview.COLUMN_ID_COMPLETION,name:WH.TERMS.completion,hidden:true,compute:function(c,e,d,b){var a=!c.hasOwnProperty("classs")||!Listview.templates.item._validCompletionCategory(c.classs,c.subclass,c.quality);WH.addCompletionIcons(e,"item",c.id,a)},sortFunc:function(d,c,e){return WH.stringCompare(WH.getCompletionFlags("item",d.id),WH.getCompletionFlags("item",c.id))},getValue:function(b){var e=0;var d=g_completion.item;if(!b.hasOwnProperty("classs")||!Listview.templates.item._validCompletionCategory(b.classs,b.subclass,b.quality)){return-1}for(var f in g_user.lists){var a=g_user.lists[f];if(!(a.id in d)){continue}if(WH.inArray(d[a.id],b.id)!=-1){e++}}return e}}],getItemLink:Listview.funcBox.getItemUrl.bind(this),_validCompletionCategory:function(a,c,b){return(WH.inArray(g_completion_categories[3],a)!=-1)||(WH.inArray(g_completion_categories[3],""+a+"-"+c)!=-1)||(WH.inArray(g_completion_categories[3],""+a+"q"+b)!=-1)},onBeforeCreate:function(){var c=false;for(var d=0,b=this.data.length;d<b;++d){var f=this.data[d];if((f.slot>0&&f.slot!=18)||(WH.ModelViewer.supportsInventoryType(f.slotbak)&&f.displayid>0)||f.modelviewer){++c}}if(c>0){this._nComparable=c}for(var a in this.columns){if((this.columns[a].id=="completed")&&(this.columns[a].hidden)){if(!(this.hasOwnProperty("completionMode")&&this.completionMode)&&WH.isRetailTree()&&WH.isSet("g_user")&&"lists"in g_user&&"item"in g_completion&&WH.inArray(this.hiddenCols,this.columns[a].id)==-1){var e=0;for(var g in this.data){if(this.data[g].hasOwnProperty("classs")&&Listview.templates.item._validCompletionCategory(this.data[g].classs,this.data[g].subclass,this.data[g].quality)){e++}}if(e>(this.data.length*0.1)){this.visibility.push(parseInt(a))}}}}},createCbControls:function(c,b){if(!b){return}let iViewIn3d=WH.ce("input",{type:"button",value:WH.TERMS.viewin3d});let scaleIlvl=WH.ce("input",{type:"button",value:WH.TERMS.scaleilvl});iViewIn3d.onclick=this.template.viewIn3d.bind(this);this.template.buildScalingMenu.call(this,scaleIlvl);if(this._nComparable==0||typeof this._nComparable=="undefined"){iViewIn3d.disabled="disabled"}WH.ae(c,iViewIn3d);if(WH.isRetailTree()){WH.ae(c,scaleIlvl)}if((g_user.roles&U_GROUP_STAFF)>0&&!WH.isRetailTree()){var a=WH.ce("button",{className:"btn-primary"},WH.ct("Set Phase"));WH.aE(a,"click",this.template.setPhase.bind(this));WH.ae(c,a)}},createTooltipToggle:function(b,a){if(!a){return}this.addTooltipToggle(b,g_items)},buildScalingMenu:function(d){const b=this;var a=[{name:WH.TERMS.normal,mode:null},{name:g_difficulty_names[24]+" "+WH.TERMS.wrathofthelichking_abbrev,mode:{name:"twwotlk",value:function(f){var g=Listview.funcBox.getItemLevelWithBonuses.call(this,f);if(g>WH.applyStatModifications.ITEM_TIMEWALKINGMODE_WOTLK_LEVEL){return WH.applyStatModifications.ITEM_TIMEWALKINGMODE_WOTLK_LEVEL}return g}}},{name:g_difficulty_names[24]+" "+WH.TERMS.theburningcrusade_short,mode:{name:"twtbc",value:function(f){var g=Listview.funcBox.getItemLevelWithBonuses.call(this,f);if(g>WH.applyStatModifications.ITEM_TIMEWALKINGMODE_TBC_LEVEL){return WH.applyStatModifications.ITEM_TIMEWALKINGMODE_TBC_LEVEL}return g}}},{name:g_difficulty_names[24]+" "+WH.TERMS.cataclysm_abbrev,mode:{name:"twcata",value:function(f){var g=Listview.funcBox.getItemLevelWithBonuses.call(this,f);if(g>WH.applyStatModifications.ITEM_TIMEWALKINGMODE_CATA_LEVEL){return WH.applyStatModifications.ITEM_TIMEWALKINGMODE_CATA_LEVEL}return g}}},{name:g_difficulty_names[24]+" "+WH.TERMS.mistsofpandaria_abbrev,mode:{name:"twmists",value:function(f){var g=Listview.funcBox.getItemLevelWithBonuses.call(this,f);if(g>WH.applyStatModifications.ITEM_TIMEWALKINGMODE_MISTS_LEVEL){return WH.applyStatModifications.ITEM_TIMEWALKINGMODE_MISTS_LEVEL}return g}}},{name:WH.TERMS.pvpmode+WH.TERMS.wordspace_punct+WH.TERMS.openparenthesis_punct+WH.sprintf(WH.TERMS.level_format.replace("%s","$1"),100)+WH.TERMS.closedparenthesis_punct,mode:{name:"pvp",value:function(f){var g=Listview.funcBox.getItemLevelWithBonuses.call(this,f);var h=g;if(f.pvpUpgrade){h=g+f.pvpUpgrade}else{if(g>=560&&g<=690){h=690}else{if(g>715){h=715}}}return h}}}];var e=[];for(var c=0;c<a.length;++c){e.push([c,a[c].name,(function(f){return function(){this.checked=true;if(WH.isSet("g_listviews")&&g_listviews){for(var h in g_listviews){var g=g_listviews[h];g.ilvlOverride=f;Filter.listview_computeItemScores(g);g.applySort();g.Filters.apply()}}}})(a[c].mode),null,{checkedFunc:function(f){var g=a[f[0]].mode;if(!g&&!b.ilvlOverride){return true}return g&&b.ilvlOverride&&g.name==b.ilvlOverride.name}}])}Menu.add(d,e)},viewIn3d:function(){var j=this.getCheckedRows();if(!j.length){return}var b=this;var l=false,g=false,h=false;var e={};var f=null;WH.arrayWalk(j,function(i){i.currentDisplayId=i.displayid;var n=Listview.funcBox.getCurrentItemBonuses.call(b,i);var m=g_items.getAppearance(i.id,n);if(m!=null&&m[0]){i.currentDisplayId=m[0]}if(WH.ModelViewer.supportsInventoryType(i.slotbak)&&i.currentDisplayId>0){var o=WH.ModelViewer.getEffectiveInventoryType(i.slotbak);if(e[o]){g=true}e[o]={displayId:i.currentDisplayId,typeId:i.id,bonus:n.length?n[0]:0};l=true}else{if(i.modelviewer){f=i.modelviewer}else{h=true}}});var k=null;if(f){if(l||h){k=WH.TERMS.itemsignored_tip}WH.ModelViewer.showLightbox({type:f.type,displayId:f.displayid,slot:f.slot,message:k})}else{if(g||h){k=WH.TERMS.itemsignored_tip}var a=[];var c=[];for(var d in e){a.push(parseInt(d));a.push(e[d].displayId);c.push([e[d].typeId,e[d].bonus,parseInt(d)])}if(a.length>0){WH.ModelViewer.showLightbox({type:4,equipList:a,message:k,itemData:c})}else{alert(WH.TERMS.nothingtoviewin3d_tip)}}},setPhase:function(){var c=this.getCheckedRows();if(!c.length){return}var b=[];for(var a=0;a<c.length;a++){b.push(c[a].id)}WH.Wow.showContentPhasePrompt(WH.Types.ITEM,b)}};